{"version":3,"sources":["text-input-mask.tsx"],"names":["TextInputMask","BaseTextComponent","constructor","props","maskedText","rawText","onChangeText","_trySetNativeProps","_handleFocus","bind","_handleBlur","_inputElement","React","createRef","_onChangeText","getElement","text","_checkText","updateValue","setContent","e","_maskHandler","handleBlur","value","options","onBlur","handleFocus","onFocus","element","current","setNativeProps","error","checkText","_getKeyboardType","keyboardType","getKeyboardType","render","Input","TextInput","customTextInputProps","customTextInput","Platform","OS","getDisplayValueFor"],"mappings":";;;;;;;AAAA;;AAOA;;AAGA;;;;;;;;AAEe,MAAMA,aAAN,SAA4BC,0BAA5B,CAEb;AAGAC,EAAAA,WAAW,CAACC,KAAD,EAA4B;AACrC,UAAMA,KAAN;;AADqC;;AAAA,wCAa1B,CAACC,UAAD,EAAwBC,OAAxB,KAA4C;AACvD,UAAI,KAAKF,KAAL,CAAWG,YAAf,EAA6B;AAC3B,aAAKC,kBAAL,CAAwBH,UAAxB;;AACA,aAAKD,KAAL,CAAWG,YAAX,CAAwBF,UAAxB,EAAoCC,OAApC;AACD;AACF,KAlBsC;;AAGrC,SAAKG,YAAL,GAAoB,KAAKA,YAAL,CAAkBC,IAAlB,CAAuB,IAAvB,CAApB;AACA,SAAKC,WAAL,GAAmB,KAAKA,WAAL,CAAiBD,IAAjB,CAAsB,IAAtB,CAAnB;AACA,SAAKE,aAAL,gBAAqBC,eAAMC,SAAN,EAArB;AACA,SAAKC,aAAL,GAAqB,KAAKA,aAAL,CAAmBL,IAAnB,CAAwB,IAAxB,CAArB;AACD;;AAEDM,EAAAA,UAAU,GAAG;AACX,WAAO,KAAKJ,aAAZ;AACD;;AASDG,EAAAA,aAAa,CAACE,IAAD,EAAe;AAC1B,QAAI,CAAC,KAAKC,UAAL,CAAgBD,IAAhB,CAAL,EAA4B;AAC1B;AACD;;AAED,UAAM;AAAEZ,MAAAA,UAAF;AAAcC,MAAAA;AAAd,QAA0B,KAAKa,WAAL,CAAiBF,IAAjB,CAAhC;AAEA,SAAKG,UAAL,CAAgBf,UAAhB,EAA4BC,OAA5B;AACD;;AAEDK,EAAAA,WAAW,CAACU,CAAD,EAAmD;AAC5D,QAAI,KAAKC,YAAL,CAAkBC,UAAtB,EAAkC;AAChC,YAAM;AAAElB,QAAAA,UAAF;AAAcC,QAAAA;AAAd,UAA0B,KAAKgB,YAAL,CAAkBC,UAAlB,CAC9B,KAAKnB,KAAL,CAAWoB,KADmB,EAE9B,KAAKpB,KAAL,CAAWqB,OAFmB,CAAhC;;AAKA,WAAKL,UAAL,CAAgBf,UAAhB,EAA4BC,OAA5B;AACD;;AAED,QAAI,KAAKF,KAAL,CAAWsB,MAAf,EAAuB;AACrB,WAAKtB,KAAL,CAAWsB,MAAX,CAAkBL,CAAlB;AACD;AACF;;AAEDZ,EAAAA,YAAY,CAACY,CAAD,EAAmD;AAC7D,QAAI,KAAKC,YAAL,CAAkBK,WAAtB,EAAmC;AACjC,YAAM;AAAEtB,QAAAA,UAAF;AAAcC,QAAAA;AAAd,UAA0B,KAAKgB,YAAL,CAAkBK,WAAlB,CAC9B,KAAKvB,KAAL,CAAWoB,KADmB,EAE9B,KAAKpB,KAAL,CAAWqB,OAFmB,CAAhC;;AAIA,WAAKL,UAAL,CAAgBf,UAAhB,EAA4BC,OAA5B;AACD;;AAED,QAAI,KAAKF,KAAL,CAAWwB,OAAf,EAAwB;AACtB,WAAKxB,KAAL,CAAWwB,OAAX,CAAmBP,CAAnB;AACD;AACF;;AAEDb,EAAAA,kBAAkB,CAACH,UAAD,EAAwB;AACxC,QAAI;AAAA;;AACF,YAAMwB,OAAO,GAAG,KAAKb,UAAL,EAAhB;AAEA,2BAAAa,OAAO,CAACC,OAAR,sEAAiBC,cAAjB,KACEF,OAAO,CAACC,OAAR,CAAgBC,cAAhB,CAA+B;AAAEd,QAAAA,IAAI,EAAEZ;AAAR,OAA/B,CADF;AAED,KALD,CAKE,OAAO2B,KAAP,EAAc,CACd;AACD;AACF;;AAEDd,EAAAA,UAAU,CAACD,IAAD,EAAkB;AAC1B,QAAI,KAAKb,KAAL,CAAW6B,SAAf,EAA0B;AACxB,aAAO,KAAK7B,KAAL,CAAW6B,SAAX,CAAqB,KAAK7B,KAAL,CAAWoB,KAAhC,EAAuCP,IAAvC,CAAP;AACD;;AAED,WAAO,IAAP;AACD;;AAEDiB,EAAAA,gBAAgB,GAAG;AACjB,WACE,KAAK9B,KAAL,CAAW+B,YAAX,KACC,KAAKb,YAAL,CAAkBc,eAAlB,GACG,KAAKd,YAAL,CAAkBc,eAAlB,EADH,GAEG,SAHJ,CADF;AAMD;;AAEDC,EAAAA,MAAM,GAAG;AACP,QAAIC,KAAK,GAAGC,sBAAZ;AACA,QAAIC,oBAAoB,GAAG,EAA3B;;AAEA,QAAI,KAAKpC,KAAL,CAAWqC,eAAf,EAAgC;AAC9BH,MAAAA,KAAK,GAAG,KAAKlC,KAAL,CAAWqC,eAAnB;AACAD,MAAAA,oBAAoB,GAAG,KAAKpC,KAAL,CAAWoC,oBAAX,IAAmC,EAA1D;AACD;;AAED,wBACE,6BAAC,KAAD;AACE,MAAA,GAAG,EAAE,KAAK5B,aADZ;AAEE,MAAA,YAAY,EACT8B,sBAASC,EAAT,KAAgB,KAAhB,GACG,KAAKT,gBAAL,EADH,GAEG;AALR,OAOM,KAAK9B,KAPX,EAQMoC,oBARN;AASE,MAAA,OAAO,EAAE,KAAK/B,YAThB;AAUE,MAAA,MAAM,EAAE,KAAKE,WAVf;AAWE,MAAA,YAAY,EAAE,KAAKI,aAXrB;AAYE,MAAA,KAAK,EAAE,KAAK6B,kBAAL,CAAwB,KAAKxC,KAAL,CAAWoB,KAAnC;AAZT,OADF;AAgBD;;AAnHD","sourcesContent":["import {\n  TextInput,\n  Platform,\n  NativeSyntheticEvent,\n  TextInputFocusEventData,\n  KeyboardTypeOptions,\n} from 'react-native';\nimport BaseTextComponent from './base-text-component';\nimport type { TextInputMaskProps, ValueType } from '../index';\nimport type { ReactText, RefObject } from 'react';\nimport React from 'react';\n\nexport default class TextInputMask extends BaseTextComponent<\n  TextInputMaskProps\n> {\n  _inputElement!: RefObject<TextInput>;\n\n  constructor(props: TextInputMaskProps) {\n    super(props);\n\n    this._handleFocus = this._handleFocus.bind(this);\n    this._handleBlur = this._handleBlur.bind(this);\n    this._inputElement = React.createRef<TextInput>();\n    this._onChangeText = this._onChangeText.bind(this);\n  }\n\n  getElement() {\n    return this._inputElement;\n  }\n\n  setContent = (maskedText: ReactText, rawText: number) => {\n    if (this.props.onChangeText) {\n      this._trySetNativeProps(maskedText);\n      this.props.onChangeText(maskedText, rawText);\n    }\n  };\n\n  _onChangeText(text: string) {\n    if (!this._checkText(text)) {\n      return;\n    }\n\n    const { maskedText, rawText } = this.updateValue(text);\n\n    this.setContent(maskedText, rawText);\n  }\n\n  _handleBlur(e: NativeSyntheticEvent<TextInputFocusEventData>) {\n    if (this._maskHandler.handleBlur) {\n      const { maskedText, rawText } = this._maskHandler.handleBlur(\n        this.props.value,\n        this.props.options\n      );\n\n      this.setContent(maskedText, rawText);\n    }\n\n    if (this.props.onBlur) {\n      this.props.onBlur(e);\n    }\n  }\n\n  _handleFocus(e: NativeSyntheticEvent<TextInputFocusEventData>) {\n    if (this._maskHandler.handleFocus) {\n      const { maskedText, rawText } = this._maskHandler.handleFocus(\n        this.props.value,\n        this.props.options\n      );\n      this.setContent(maskedText, rawText);\n    }\n\n    if (this.props.onFocus) {\n      this.props.onFocus(e);\n    }\n  }\n\n  _trySetNativeProps(maskedText: ValueType) {\n    try {\n      const element = this.getElement();\n\n      element.current?.setNativeProps &&\n        element.current.setNativeProps({ text: maskedText });\n    } catch (error) {\n      // silent\n    }\n  }\n\n  _checkText(text: ValueType) {\n    if (this.props.checkText) {\n      return this.props.checkText(this.props.value, text);\n    }\n\n    return true;\n  }\n\n  _getKeyboardType() {\n    return (\n      this.props.keyboardType ||\n      (this._maskHandler.getKeyboardType\n        ? this._maskHandler.getKeyboardType()\n        : 'default')\n    );\n  }\n\n  render() {\n    let Input = TextInput;\n    let customTextInputProps = {};\n\n    if (this.props.customTextInput) {\n      Input = this.props.customTextInput;\n      customTextInputProps = this.props.customTextInputProps || {};\n    }\n\n    return (\n      <Input\n        ref={this._inputElement}\n        keyboardType={\n          (Platform.OS !== 'web'\n            ? this._getKeyboardType()\n            : 'default') as KeyboardTypeOptions\n        }\n        {...this.props}\n        {...customTextInputProps}\n        onFocus={this._handleFocus}\n        onBlur={this._handleBlur}\n        onChangeText={this._onChangeText}\n        value={this.getDisplayValueFor(this.props.value)}\n      />\n    );\n  }\n}\n"]}