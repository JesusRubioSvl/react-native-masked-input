{"version":3,"sources":["credit-card.mask.js"],"names":["defaultType","type","gaps","lengths","MASK_TRANSLATION","val","CreditCardMask","BaseMask","getType","getValue","value","settings","CustomMask","shared","mask","getMask","translation","validate","getCardType","includes","length","getRawValue","maskedValue","split","map","trim","Math","max","g","i","firstGap","lastGap","Array","from","_","obfuscated","join"],"mappings":";;;;;;;AAAA;;AACA;;AACA;;;;AAEA,MAAMA,WAAW,GAAG;AAAEC,EAAAA,IAAI,EAAE,SAAR;AAAmBC,EAAAA,IAAI,EAAE,CAAC,CAAD,EAAI,CAAJ,EAAO,EAAP,CAAzB;AAAqCC,EAAAA,OAAO,EAAE,CAAC,EAAD;AAA9C,CAApB;AAEA,MAAMC,gBAAgB,GAAG;AACvB,OAAMC,GAAD,IAAS;AADS,CAAzB;;AAIe,MAAMC,cAAN,SAA6BC,aAA7B,CAAsC;AACnD,SAAOC,OAAP,GAAiB;AACf,WAAO,aAAP;AACD;;AAEDC,EAAAA,QAAQ,CAACC,KAAD,EAAQC,QAAR,EAAkB;AACxB,WAAOC,gBAAWC,MAAX,CAAkBJ,QAAlB,CAA2BC,KAA3B,EAAkC;AACvCI,MAAAA,IAAI,EAAE,KAAKC,OAAL,CAAaL,KAAb,EAAoBC,QAApB,CADiC;AAEvCK,MAAAA,WAAW,EAAEZ;AAF0B,KAAlC,CAAP;AAID;;AAEDa,EAAAA,QAAQ,CAACP,KAAD,EAAQ;AACd,QAAIA,KAAJ,EAAW;AACT,YAAMT,IAAI,GAAG,KAAKiB,WAAL,CAAiBR,KAAjB,CAAb;AACA,aAAOT,IAAI,CAACE,OAAL,CAAagB,QAAb,CAAsBT,KAAK,CAACU,MAA5B,CAAP;AACD;;AAED,WAAO,IAAP;AACD;;AAEDC,EAAAA,WAAW,CAACC,WAAD,EAAcX,QAAd,EAAwB;AACjC,QAAI,CAACW,WAAL,EAAkB,OAAO,EAAP;AAElB,WAAOA,WAAW,CAACC,KAAZ,CAAkB,GAAlB,EAAuBC,GAAvB,CAA4BnB,GAAD,IAAS;AACzC,UAAI,CAACA,GAAL,EAAU,OAAO,EAAP;AAEV,aAAOA,GAAG,CAACoB,IAAJ,EAAP;AACD,KAJM,CAAP;AAKD;;AAEDV,EAAAA,OAAO,CAACL,KAAD,EAAQC,QAAQ,GAAG,EAAnB,EAAuB;AAC5B,UAAMV,IAAI,GAAG,KAAKiB,WAAL,CAAiBR,KAAjB,CAAb;AACA,UAAMU,MAAM,GAAGM,IAAI,CAACC,GAAL,CAAS,GAAG1B,IAAI,CAACE,OAAjB,CAAf;AACA,UAAMD,IAAI,GAAGD,IAAI,CAACC,IAAL,CAAUsB,GAAV,CAAc,CAACI,CAAD,EAAIC,CAAJ,KAAUD,CAAC,GAAGC,CAA5B,CAAb;AAEA,UAAMC,QAAQ,GAAG5B,IAAI,CAAC,CAAD,CAArB;AACA,UAAM6B,OAAO,GAAG7B,IAAI,CAACA,IAAI,CAACkB,MAAL,GAAc,CAAf,CAApB;AACA,WAAOY,KAAK,CAACC,IAAN,CAAW,IAAID,KAAJ,CAAUZ,MAAM,GAAGlB,IAAI,CAACkB,MAAxB,CAAX,EACJI,GADI,CACA,CAACU,CAAD,EAAIL,CAAJ,KAAU;AACb,UAAI3B,IAAI,CAACiB,QAAL,CAAcU,CAAd,CAAJ,EAAsB,OAAO,GAAP;AACtB,UAAIlB,QAAQ,CAACwB,UAAT,IAAuBN,CAAC,GAAGC,QAA3B,IAAuCD,CAAC,GAAGE,OAA/C,EAAwD,OAAO,GAAP;AACxD,aAAO,CAAP;AACD,KALI,EAMJK,IANI,CAMC,EAND,CAAP;AAOD;;AAEDlB,EAAAA,WAAW,CAACR,KAAD,EAAQ;AACjB,WAAO,6BAAUA,KAAV,EAAiB,CAAjB,KAAuBV,WAA9B;AACD;;AAjDkD","sourcesContent":["import cardTypes from 'credit-card-type';\nimport BaseMask from './_base.mask';\nimport CustomMask from './custom.mask';\n\nconst defaultType = { type: 'default', gaps: [4, 8, 12], lengths: [16] };\n\nconst MASK_TRANSLATION = {\n  '*': (val) => '*',\n};\n\nexport default class CreditCardMask extends BaseMask {\n  static getType() {\n    return 'credit-card';\n  }\n\n  getValue(value, settings) {\n    return CustomMask.shared.getValue(value, {\n      mask: this.getMask(value, settings),\n      translation: MASK_TRANSLATION,\n    });\n  }\n\n  validate(value) {\n    if (value) {\n      const type = this.getCardType(value);\n      return type.lengths.includes(value.length);\n    }\n\n    return true;\n  }\n\n  getRawValue(maskedValue, settings) {\n    if (!maskedValue) return [];\n\n    return maskedValue.split(' ').map((val) => {\n      if (!val) return '';\n\n      return val.trim();\n    });\n  }\n\n  getMask(value, settings = {}) {\n    const type = this.getCardType(value);\n    const length = Math.max(...type.lengths);\n    const gaps = type.gaps.map((g, i) => g + i);\n\n    const firstGap = gaps[0];\n    const lastGap = gaps[gaps.length - 1];\n    return Array.from(new Array(length + gaps.length))\n      .map((_, i) => {\n        if (gaps.includes(i)) return ' ';\n        if (settings.obfuscated && i > firstGap && i < lastGap) return '*';\n        return 9;\n      })\n      .join('');\n  }\n\n  getCardType(value) {\n    return cardTypes(value)[0] || defaultType;\n  }\n}\n"]}