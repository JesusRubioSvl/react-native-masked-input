{"version":3,"sources":["cel-phone.mask.js"],"names":["PHONE_8_MASK","PHONE_9_MASK","PHONE_INTERNATIONAL","MASK_TYPES","BRL","INTERNATIONAL","CEL_PHONE_SETTINGS","maskType","withDDD","dddMask","CelPhoneMask","BaseMask","getType","getValue","value","settings","cleanedValue","removeNotNumbers","mask","getMask","CustomMask","shared","getRawValue","maskedValue","validate","valueToValidate","getDefaultValue","length","mergedSettings","mergeSettings","numbers","use9DigitMask","numbersDDD","remainingValueNumbers","substr"],"mappings":";;;;;;;AAAA;;AACA;;;;AAEA,MAAMA,YAAY,GAAG,WAArB;AACA,MAAMC,YAAY,GAAG,YAArB;AACA,MAAMC,mBAAmB,GAAG,kBAA5B;AAEA,MAAMC,UAAU,GAAG;AACjBC,EAAAA,GAAG,EAAE,KADY;AAEjBC,EAAAA,aAAa,EAAE;AAFE,CAAnB;AAKA,MAAMC,kBAAkB,GAAG;AACzBC,EAAAA,QAAQ,EAAEJ,UAAU,CAACC,GADI;AAEzBI,EAAAA,OAAO,EAAE,IAFgB;AAGzBC,EAAAA,OAAO,EAAE;AAHgB,CAA3B;;AAMe,MAAMC,YAAN,SAA2BC,aAA3B,CAAoC;AACjD,SAAOC,OAAP,GAAiB;AACf,WAAO,WAAP;AACD;;AAEDC,EAAAA,QAAQ,CAACC,KAAD,EAAQC,QAAR,EAAkB;AACxB,QAAIC,YAAY,GAAG,MAAMC,gBAAN,CAAuBH,KAAvB,CAAnB;AACA,QAAII,IAAI,GAAG,KAAKC,OAAL,CAAaH,YAAb,EAA2BD,QAA3B,CAAX;AACA,WAAOK,gBAAWC,MAAX,CAAkBR,QAAlB,CAA2BG,YAA3B,EAAyC;AAAEE,MAAAA;AAAF,KAAzC,CAAP;AACD;;AAEDI,EAAAA,WAAW,CAACC,WAAD,EAAcR,QAAd,EAAwB;AACjC,WAAO,MAAME,gBAAN,CAAuBM,WAAvB,CAAP;AACD;;AAEDC,EAAAA,QAAQ,CAACV,KAAD,EAAQC,QAAR,EAAkB;AACxB,QAAIU,eAAe,GAAG,MAAMC,eAAN,CAAsBZ,KAAtB,CAAtB;AACAW,IAAAA,eAAe,GAAG,KAAKZ,QAAL,CAAcC,KAAd,EAAqBC,QAArB,CAAlB;AAEA,QAAIG,IAAI,GAAG,KAAKC,OAAL,CAAaL,KAAb,EAAoBC,QAApB,CAAX;AAEA,WAAOU,eAAe,CAACE,MAAhB,KAA2BT,IAAI,CAACS,MAAvC;AACD;;AAEDR,EAAAA,OAAO,CAACL,KAAD,EAAQC,QAAR,EAAkB;AACvB,QAAIa,cAAc,GAAG,MAAMC,aAAN,CAAoBvB,kBAApB,EAAwCS,QAAxC,CAArB;;AAEA,QAAIa,cAAc,CAACrB,QAAf,KAA4BJ,UAAU,CAACE,aAA3C,EAA0D;AACxD,aAAOH,mBAAP;AACD;;AAED,QAAI4B,OAAO,GAAG,MAAMb,gBAAN,CAAuBH,KAAvB,CAAd;AACA,QAAII,IAAI,GAAGlB,YAAX;;AAEA,QAAI+B,aAAa,GAAG,CAAC,MAAM;AACzB,UAAIH,cAAc,CAACpB,OAAnB,EAA4B;AAC1B,YAAIwB,UAAU,GAAG,MAAMf,gBAAN,CAAuBW,cAAc,CAACnB,OAAtC,CAAjB;AACA,YAAIwB,qBAAqB,GAAGH,OAAO,CAACI,MAAR,CAAeF,UAAU,CAACL,MAA1B,CAA5B;AACA,eAAOM,qBAAqB,CAACN,MAAtB,IAAgC,CAAvC;AACD,OAJD,MAIO;AACL,eAAOG,OAAO,CAACH,MAAR,IAAkB,CAAzB;AACD;AACF,KARmB,GAApB;;AAUA,QAAII,aAAJ,EAAmB;AACjBb,MAAAA,IAAI,GAAGjB,YAAP;AACD;;AAED,QAAI2B,cAAc,CAACpB,OAAnB,EAA4B;AAC1BU,MAAAA,IAAI,aAAMU,cAAc,CAACnB,OAArB,SAA+BS,IAA/B,CAAJ;AACD;;AAED,WAAOA,IAAP;AACD;;AArDgD","sourcesContent":["import BaseMask from './_base.mask';\nimport CustomMask from './custom.mask';\n\nconst PHONE_8_MASK = '9999-9999';\nconst PHONE_9_MASK = '99999-9999';\nconst PHONE_INTERNATIONAL = '+999 999 999 999';\n\nconst MASK_TYPES = {\n  BRL: 'BRL',\n  INTERNATIONAL: 'INTERNATIONAL',\n};\n\nconst CEL_PHONE_SETTINGS = {\n  maskType: MASK_TYPES.BRL,\n  withDDD: true,\n  dddMask: '(99) ',\n};\n\nexport default class CelPhoneMask extends BaseMask {\n  static getType() {\n    return 'cel-phone';\n  }\n\n  getValue(value, settings) {\n    let cleanedValue = super.removeNotNumbers(value);\n    let mask = this.getMask(cleanedValue, settings);\n    return CustomMask.shared.getValue(cleanedValue, { mask });\n  }\n\n  getRawValue(maskedValue, settings) {\n    return super.removeNotNumbers(maskedValue);\n  }\n\n  validate(value, settings) {\n    let valueToValidate = super.getDefaultValue(value);\n    valueToValidate = this.getValue(value, settings);\n\n    let mask = this.getMask(value, settings);\n\n    return valueToValidate.length === mask.length;\n  }\n\n  getMask(value, settings) {\n    let mergedSettings = super.mergeSettings(CEL_PHONE_SETTINGS, settings);\n\n    if (mergedSettings.maskType === MASK_TYPES.INTERNATIONAL) {\n      return PHONE_INTERNATIONAL;\n    }\n\n    let numbers = super.removeNotNumbers(value);\n    let mask = PHONE_8_MASK;\n\n    let use9DigitMask = (() => {\n      if (mergedSettings.withDDD) {\n        let numbersDDD = super.removeNotNumbers(mergedSettings.dddMask);\n        let remainingValueNumbers = numbers.substr(numbersDDD.length);\n        return remainingValueNumbers.length >= 9;\n      } else {\n        return numbers.length >= 9;\n      }\n    })();\n\n    if (use9DigitMask) {\n      mask = PHONE_9_MASK;\n    }\n\n    if (mergedSettings.withDDD) {\n      mask = `${mergedSettings.dddMask}${mask}`;\n    }\n\n    return mask;\n  }\n}\n"]}